<!DOCTYPE html>
<html>
<head>
    <title>Custom Event Example</title>
</head>
<body>
    <input type="text" bind="$a">
    <input type="text" bind="$b">
    <input type="text" bind="$a + $b">
    <script src="1.1.0/livedata.js"></script>
    <script src="1.2.0/dynamic.js"></script>
    <script>
        const a = [1, 2];

        const test = scan("input")
        const myInput = document.querySelectorAll('input');

        myInput.forEach(obj => obj.addEventListener('input', function() {
            if (obj.attributes.bind) {
                const customEvent = new CustomEvent('valueChanged', { detail: obj.value });
                scan("!input[bind]").forEach(obj => {
                    console.log(obj.attributes.bind.value)
                })
                document.dispatchEvent(customEvent);
            }
        }));

        document.addEventListener('valueChanged', function(event) {
            console.log('Value changed:', event.detail);
        });
  </script>
</body>
</html>
